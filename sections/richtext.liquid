{%- assign section_color = section.settings.color_scheme -%}
{%- assign section_bg_color = section.settings.section_bg_color -%}
{%- assign section_custom_padding = section.settings.section_custom_padding -%}

{% if section_custom_padding == 'smaller' %}
  {% assign section_custom_padding = 'section-with-padding--smaller' %}
{% elsif section_custom_padding == 'larger' %}
  {% assign section_custom_padding = 'section-with-padding--larger' %}
{% else %}
  {% assign section_custom_padding = null %}
{% endif %}

{%- comment -%}Full Width Option{%- endcomment -%}
{% assign is_title_full_width = section.settings.is_title_full_width %}

{% if is_title_full_width %}
  {% assign title_width_class = 'one-whole mb1 lg--up--mb3 ' %}
  {% assign grid_items_class = 'one-whole' %}
{% else %}
  {% assign title_width_class = 'lg--up--one-third' %}
  {% assign grid_items_class = 'lg--up--two-thirds' %}
{% endif %}

{%- case section.blocks.size -%}
  {%- when 1 -%}
     {%- assign block_class = 'lg--up--three-quarters font-size--ml line-height--5 lg--up--font-size--xl lg--up--line-height--6' -%}
  {%- when 2 -%}
    {%- assign block_class = 'lg--up--one-half' -%}
  {%- when 3 -%}
    {%- assign block_class = 'lg--up--one-third' -%}
{%- endcase -%}

<section class="richtext aw-richtext-module section-with-padding {{ section_custom_padding }} color--{{ section_color }}-text bg--{{ section_color }}-background {{ section_bg_color }}" data-section-type="richtext" data-section-id="{{ section.id }}">
  <div class="max-site-width lg--up--px3">
    <div class="grid">

      <div class="grid__item {{ title_width_class }}">
        <div class="pb3 pl2 pr4 lg--up--px0 lg--up--pb0">

          {% if section.settings.title  %}
            <h2 class="f--heading font-size__heading m0 line-height-120 {{ section_text_color }}">{{ section.settings.title }}</h2>
          {% endif %}

          {% if section.settings.subtext  %}
            <h2 class="font-size--l line-height--5b mt2{{ section_text_color }}">{{ section.settings.subtext }}</h2>
          {% endif %}

          {% if section.settings.show_first_cta %}
            <a class="inline-block aw-richtext-cta aw-btn--navy homepage-more-link  font-size__basic link-underline--{{ section_color }} hover-underline--{{ section_color }}" href="{{ section.settings.cta_url }}" >
              {{ section.settings.cta_text }}
            </a>
          {% endif %}


        </div>
      </div>

      <div class="grid__item {{ grid_items_class }}">
        <div class="px2 lg--up--px0">
          <div class="grid mtn2 lg--up--mt0">
            {% for block in section.blocks %}
            <div class="grid__item mt2 lg--up--mt0 {% if section.blocks.size == 2 %}font-size__basic{% endif %} {{ block_class }}">
              {{ block.settings.richtext }}
              {% if forloop.last == true %}

                {% if section.settings.cta_url_after_text %}
                  <a class="inline-block aw-btn--text pt2" href="{{ section.settings.cta_url_after_text }}" >
                    {{ section.settings.cta_text_after_text }}
                  </a>
                {% endif %}

                {% if section.settings.cta_url_after_text_2 %}
                  <a class="inline-block aw-btn--text ml2 pt2" href="{{ section.settings.cta_url_after_text_2 }}" >
                    {{ section.settings.cta_text_after_text_2 }}
                  </a>
                {% endif %}

              {% endif%}
            </div>
            {% endfor %}
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

{% schema %}
{
  "name": "Rich text",
  "settings": [
    {
      "type":      "header",
      "content":   "Title Settings"
    },
    {
      "type": "checkbox",
      "id": "is_title_full_width",
      "label": "Display title in a full width container.",
      "info": "When this option is checked the title will display above the text columns.",
      "default": false
    },
    {
      "id": "title",
      "type": "text",
      "label": "Heading",
      "default": "Title"
    },
    {
      "type": "richtext",
      "id": "subtext",
      "label": "Subtext under heading"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "First Call to action link"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "First Call to action button text"
    },
    {
      "type": "url",
      "id": "cta_url_after_text",
      "label": "After text call to action link"
    },
    {
      "type": "text",
      "id": "cta_text_after_text",
      "label": "After text call to action button text"
    },
    {
      "type": "url",
      "id": "cta_url_after_text_2",
      "label": "After text call to action link"
    },
    {
      "type": "text",
      "id": "cta_text_after_text_2",
      "label": "After text call to action button text"
    },
    {
      "type": "checkbox",
      "id": "show_first_cta",
      "label": "Show first call to action button?",
      "default": false
    },
    {
      "type":      "header",
      "content":   "Color"
    },
    {
       "type": "select",
       "id": "color_scheme",
       "label": "Color scheme",
       "options": [
          { "value": "primary", "label": "Primary"},
          { "value": "secondary", "label": "Secondary"},
          { "value": "tertiary", "label": "Tertiary"},
          { "value": "quaternary", "label": "Quaternary"}
       ]
    },
    {
       "type": "select",
       "id": "section_bg_color",
       "label": "Background Color",
       "options": [
        { "value": "aw_section_bg_white", "label": "White"},
        { "value": "aw_section_bg_sky_blue", "label": "Sky Blue"},
        { "value": "aw_section_bg_navy", "label": "Navy Blue"}
       ]
    },
    {
      "type":      "header",
      "content":   "Module Spacing"
    },
    {
      "type": "select",
      "id": "section_custom_padding",
      "label": "Section Custom Padding",
      "options": [
         { "value": "global", "label": "Global Padding Setting"},
         { "value": "smaller", "label": "Smaller"},
         { "value": "larger", "label": "Larger"}
      ],
      "default": "global"
   }
  ],
  "blocks": [
    {
      "type": "richtext",
      "name": "Rich text",
      "limit": 3,
      "settings": [
        {
          "id": "richtext",
          "type": "richtext",
          "label": "Text",
          "default": "<p>Use this text to share information about your brand with your customers. Describe a product, share announcements, or welcome customers to your store.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Rich text",
      "category": "Text",
      "blocks": [
        {
          "type": "richtext"
        },
        {
          "type": "richtext"
        },
        {
          "type": "richtext"
        }
      ]
    }
  ]
}
{% endschema %}
