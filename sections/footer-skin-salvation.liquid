{%- assign section_color = section.settings.color_combination -%}



{%- assign locale_selector = false -%}

{%- assign currency_selector = false -%}



{%- if section.settings.show_currency_selector and shop.enabled_currencies.size > 1 -%}

  {%- assign currency_selector = true -%}

{%- endif -%}



{%- if section.settings.show_locale_selector and shop.published_locales.size > 1 -%}

  {%- assign locale_selector = true -%}

{%- endif -%}



{% if page.handle != 'product-checker' %}



<script>

  window.onload = () => {



    // Scrolls to bottom of the page so any errors or success message can be seen after the form has been submitted.

    if (window.location.href.includes('?customer_posted=true') || window.location.href.includes('newsletter&form_type=customer')) {

      window.scrollTo(0,document.body.scrollHeight);

    }



    // Scrolls to top of the page so the captcha prompt can be visible.

    if (window.location.href.includes('challenge#contact_form')) {

      window.scrollTo(0,0);

    }

  }

</script>

{% endif %}



<footer class="section-with-padding section-with-padding--smaller color--{{ section_color }}-text bg--{{ section_color }}-background footer--aw-wrapper"

  data-section-id="{{ section.id }}"

  data-section-type="footer">

  <div class="max-site-width lg--up--px3">

    <div class="grid px2 lg--up--px0 ">

      {% if section.settings.logo != blank or settings[social_link] != blank %}

      <div class="grid__item mb3 md--up--one-whole lg--up--one-seventh">

        <div class="grid">

          <div class="grid__item one-third lg--up--one-whole">

            <a href="{{ routes.root_url }}" class="font-size--xl f--heading color--{{ section_color }}-text">

              {% assign logo_max_width = 100 %}

              {% if section.settings.logo != blank %}

                {% capture image_size %}{{ logo_max_width }}x{% endcapture %}

                <img src="{{ section.settings.logo | img_url: image_size }}"

                     srcset="{{ section.settings.logo | img_url: image_size }} 1x, {{ section.settings.logo | img_url: image_size, scale: 2 }} 2x"

                     alt="{{ section.settings.logo.alt | default: shop.name }}"

                     >

              {% endif %}

            </a>

          </div>

          <div class="grid__item two-thirds text-align--right lg--up--one-whole lg--up--mt2 lg--up--text-align--left">

            {%- assign social_accounts = 'Facebook, Twitter, Pinterest, Instagram, Snapchat, Tumblr, YouTube, Vimeo,' | split: ', ' -%}

            <ul class="list--reset p0 m0 mxn1">

              {% for social in social_accounts %}

                {%- assign social_handle = social | handleize -%}

                {% capture social_link %}social_{{ social_handle }}_link{% endcapture %}

                {% capture social_icon %}icon-{{ social_handle }}{% endcapture %}



                {% if settings[social_link] != blank %}

                  <li class="inline-block">

                    <a class="color--{{ section_color }}-text px1 font-size--xxs mb1 block" href="{{ settings[social_link] }}" title="{{ 'layout.footer.social_platform' | t: name: shop.name, platform: social }}">

                      {%- case social_handle -%}

                      {%- when 'facebook' -%}

                        {%- render 'icon-facebook' -%}

                      {%- when 'twitter' -%}

                        {%- render 'icon-twitter' -%}

                      {%- when 'pinterest' -%}

                        {%- render 'icon-pinterest' -%}

                      {%- when 'instagram' -%}

                        {%- render 'icon-instagram' -%}

                      {%- when 'snapchat' -%}

                        {%- render 'icon-snapchat' -%}

                      {%- when 'tumblr' -%}

                        {%- render 'icon-tumblr' -%}

                      {%- when 'youtube' -%}

                        {%- render 'icon-youtube' -%}

                      {%- when 'vimeo' -%}

                        {%- render 'icon-vimeo' -%}

                      {%- endcase -%}

                      <span class="icon-fallback-text">{{ social }}</span>

                    </a>

                  </li>

                {% endif %}

              {% endfor %}

            </ul>

          </div>

        </div>

      </div>

      {% assign grid_width = 'lg--up--six-sevenths' %}

      {% assign grid_custom = '' %}

      {% else %}

      {% assign grid_custom = 'grid--footer-custom' %}

      {% assign grid_width = '' %}

      {% endif %}

      <div class="grid__item md--up--one-whole {{ grid_width }}">

        <div class="grid {{ grid_custom }}">



        {% case section.blocks.size %}

          {% when 1 %}

            {% assign footer_grid_width = 'md--up--one-whole lg--up--one-whole' %}

          {% when 2 %}

            {% assign footer_grid_width = 'md--up--one-half lg--up--one-half' %}

          {% when 3 %}

            {% assign footer_grid_width = 'md--up--one-whole lg--up--one-third' %}

          {% else %}

            {% assign footer_grid_width = 'md--up--one-whole lg--up--one-whole' %}

        {% endcase %}



          {% for block in section.blocks %}



            {% if block.type == 'menus' %}

              {% assign footer_grid_expanded = 'lg--up--four-tenths' %}



              {% assign module_count_numbers = "1, 2, 3" | split: ", " %}

              {% assign count = 0 %}

              {% for module_count_number in module_count_numbers %}



                {% assign menu = 'menu%1' | replace:'%1', module_count_number %}

                {% assign menu = block.settings[menu] %}



                {% if menu != blank %}

                  {% assign count = count | plus: 1 %}

                {% endif %}



              {% endfor %}



              {% assign num_linklist = 'single' %}

              {% if count == 2 %}

                {% assign num_linklist = 'double' %}

                {% assign linklist_css_class = 'linklist--footer-custom' %}

              {% elsif count == 3 %}

                {% assign num_linklist = 'triple' %}

                {% assign linklist_css_class = 'linklist--footer-custom' %}

              {% endif %}



              {% if num_linklist == 'single' %}

                {% assign main_linklist_css_class = 'single_linklist--footer-custom' %}

              {% endif %}

            {%endif%}



            <div class="grid__item font-size__basic {{ footer_grid_width }} {{ footer_grid_expanded }} lg-up--mb0 {{ block.settings.css_class }} {{ main_linklist_css_class }} {{ linklist_css_class }}">



              {% if block.type == 'menus' %}



                <div class="grid footer--menus">

                  {% if block.settings.menu1  != blank %}

                    {% assign link_list = block.settings.menu1 %}

                    {%- render 'footer__linklist',

                              link_list: link_list,

                              num_linklist: num_linklist,

                              section_color: section_color

                    -%}

                  {% endif %}

                  {% if block.settings.menu2  != blank %}

                    {% assign link_list = block.settings.menu2 %}

                    {%- render 'footer__linklist',

                              link_list: link_list,

                              num_linklist: num_linklist,

                              section_color: section_color

                    -%}

                  {% endif %}

                  {% if block.settings.menu3  != blank %}

                    {% assign link_list = block.settings.menu3 %}

                    {%- render 'footer__linklist',

                            link_list: link_list,

                            num_linklist: num_linklist,

                            section_color: section_color

                    -%}

                  {% endif %}

                </div>

              {% endif %}



              {% if block.type == 'richtext' %}

                <div class="three-quarters lg--up--one-whole richtext" role="heading">
                  {{ block.settings.text }}

                  <ul class="footer-socials">
                    <li><a href="https://www.instagram.com/withandwithin.co/" target="_blank" aria-label="Instagram link - new window">{% render 'icon-instagram' %}</a></li>
                    <li><a href="https://www.pinterest.com/withandwithin/" target="_blank" aria-label="Pinterest link - new window">{% render 'icon-pinterest' %}</a></li>
                    <li><a href="https://www.facebook.com/withandwithin.co" target="_blank" aria-label="Facebook link - new window">{% render 'icon-facebook' %}</a></li>
                    <li><a href="https://www.yelp.com/biz/skin-salvation-acne-clinic-san-francisco-5" target="_blank" aria-label="Yelp link - new window">{% render 'icon-yelp' %}</a></li>
                  </ul>
                </div>

                {% endif %}



              {% if block.type == 'newsletter' %}

                {% if block.settings.text != blank %}

                    <div class="line-height--3 font-size__basic">

                      {{ block.settings.text}}

                    </div>

                  {% endif %}

                  {% form 'customer' %}

                    {{ form.errors | default_errors }}

                    {% if form.posted_successfully? %}

                      <p class="form--success f--main">{{ 'general.newsletter_form.confirmation' | t }}</p>

                    {% else %}

                    <div class="input-group" style="width: 100%; padding-right: 25px;">
                      <label for="firstName" style="font-size:0;display:block;height:0;">First name</label>
                      <input type="text"
                        required
                        aria-required="true"
                        name="contact[first_name ]"
                        id="firstName"
                        class="input-group-field px2 py1 bg--transparent border--navy color--{{ section_color }}-text font-size--s"
                        placeholder="First name"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                        style="margin-bottom:10px;border:1px solid #fff;" />

                      <label for="lastName" style="font-size:0;display:block;height:0;">Last name</label>
                      <input type="text"
                        required
                        aria-required="true"
                        name="contact[last_name ]"
                        id="lastName"
                        class="input-group-field px2 py1 bg--transparent border--navy color--{{ section_color }}-text font-size--s"
                        placeholder="Last name"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                      style="margin-bottom:10px;border:1px solid #fff;" />
                    </div>

                    <div class="input-group" style="padding-right: 25px;">
                      <input type="hidden" name="contact[tags]" value="newsletter">
                      <label for="Email" class="hide">{{ 'general.newsletter_form.newsletter_email' | t }}</label>
                      <input type="email"
                        name="contact[email]"
                        id="Email"
                        placeholder="email@address.com"
                        class="input-group-field px2 py1 bg--transparent border--{{ section_color }}-text color--{{ section_color }}-text font-size--s"
                        value="{% if customer %}{{ customer.email }}{% endif %}"
                        autocorrect="off"
                        autocapitalize="off">
                      <span class="input-group-btn">
                        <button type="submit" class="btn border--none newsletter__submit px2 py1 aw-btn--sky_blue" name="commit" id="Subscribe"
                          data-action='submit'>
                          <span class="newsletter__submit">{{ 'general.newsletter_form.submit' | t }}</span>
                        </button>
                      </span>
                    </div>

                    {% endif %}

                  {% endform %}

              {% endif %}

            </div>

          {% endfor %}





        </div>

      </div>

    </div>



    {%- assign payment_icons = false -%}

    {%- if section.settings.show_payment_icons and shop.enabled_payment_types != empty -%}

      {%- assign payment_icons = true -%}

    {%- endif -%}



    {%- if payment_icons or currency_selector or locale_selector or section.settings.show_footer_credits -%}



    <div class="lg--up--flex flex--row-reverse px2 mt2 lg--up--px0">



      <div class="flex--1-basis-0 mb3 lg--up--mb0">

        {%- if payment_icons -%}

        <div class="text-align--left lg--up--text-align--right">

          <span class="visually-hidden">{{ 'layout.footer.payment_methods' | t }}</span>

          <ul class="payment-icons m0 p0 list--reset font-size--xl">

            {% for type in shop.enabled_payment_types %}

              <li class="inline-block">

                {{ type | payment_type_svg_tag: class:'payment-icon' }}

              </li>

            {%- endfor -%}

          </ul>

        </div>

        {%- endif -%}



        {%- if currency_selector or locale_selector-%}

        {%- capture disclosure__toggle_classes -%}bg--transparent border--{{ section_color }}-text color--{{ section_color }}-text p1 block full--w font-size--sm text-align--left mt1{%- endcapture -%}

        {%- capture disclosure__list_classes -%}bg--{{ section_color }}-background border--{{ section_color }}-text color--{{ section_color }}-text p2 block font-size--sm mt1{%- endcapture -%}



        <div class="locale-selectors">

          {%- form 'localization', class: 'selectors-form mxn1 flex flex--wrap justify--start lg--up--justify--end' -%}

            {%- if locale_selector -%}

              <div class="selectors-form__item mx1">

                <h2 class="visually-hidden" id="lang-heading">

                  {{ 'general.language.dropdown_label' | t }}

                </h2>



                <div class="disclosure" data-disclosure-locale>

                  <button type="button"

                    class="disclosure__toggle {{ disclosure__toggle_classes }}"

                    aria-expanded="false"

                    aria-controls="lang-list"

                    aria-describedby="lang-heading"

                    data-disclosure-toggle>

                    {{ form.current_locale.endonym_name }}

                    <span class="disclosure__chevron-down font-size--xxxs inline-block ml1">{% render 'icon-chevron-down' %}</span>

                    <span class="disclosure__chevron-up font-size--xxxs inline-block ml1">{% render 'icon-chevron-up' %}</span>

                  </button>

                  <ul id="lang-list" class="disclosure-list {{ disclosure__list_classes }}" data-disclosure-list>

                    {% for locale in form.available_locales %}

                      <li class="disclosure-list__item {% unless forloop.last %}mb1{% endunless %} {% if locale.iso_code == form.current_locale.iso_code %}disclosure-list__item--current{% endif %}">

                        <a class="disclosure-list__option" href="#" lang="{{ locale.iso_code }}" {% if locale.iso_code == form.current_locale.iso_code %}aria-current="true"{% endif %} data-value="{{ locale.iso_code }}" data-disclosure-option>

                          <div class="disclosure__link-wrapper">

                            {{ locale.endonym_name }}

                          </div>

                        </a>

                      </li>

                    {%- endfor -%}

                  </ul>

                  <input type="hidden" name="locale_code" id="LocaleSelector" value="{{ form.current_locale.iso_code }}" data-disclosure-input/>

                </div>

              </div>

            {%- endif -%}



            {%- if currency_selector -%}

              <div class="selectors-form__item mx1">

                <h2 class="visually-hidden" id="currency-heading">

                  {{ 'general.currency.dropdown_label' | t }}

                </h2>



                <div class="disclosure" data-disclosure-currency>

                  <button type="button"

                    class="disclosure__toggle {{ disclosure__toggle_classes }}"

                    aria-expanded="false"

                    aria-controls="currency-list"

                    aria-describedby="currency-heading"

                    data-disclosure-toggle>

                    {{ form.current_currency.iso_code }} {%- if form.current_currency.symbol -%}{{ form.current_currency.symbol }}{%- endif -%}

                    <span class="disclosure__chevron-down font-size--xxxs inline-block ml1">{% render 'icon-chevron-down' %}</span>

                    <span class="disclosure__chevron-up font-size--xxxs inline-block ml1">{% render 'icon-chevron-up' %}</span>

                  </button>

                  <ul id="currency-list" class="disclosure-list {{ disclosure__list_classes }}" data-disclosure-list>

                    {% for currency in form.available_currencies %}

                      <li class="disclosure-list__item {% unless forloop.last %}mb1{% endunless %} {% if currency.iso_code == form.current_currency.iso_code %}disclosure-list__item--current{% endif %}">

                        <a class="disclosure-list__option" href="#" {% if currency.iso_code == form.current_currency.iso_code %}aria-current="true"{% endif %} data-value="{{ currency.iso_code }}" data-disclosure-option>

                          <div class="disclosure__link-wrapper">

                            {{ currency.iso_code }} {%- if currency.symbol -%}{{ currency.symbol }}{%- endif -%}

                          </div>

                        </a>

                      </li>

                    {%- endfor -%}

                  </ul>

                  <input type="hidden" name="currency_code" id="CurrencySelector" value="{{ form.current_currency.iso_code }}" data-disclosure-input/>

                </div>

              </div>

            {%- endif -%}

          {%- endform -%}



        </div><!-- /.locale-selectors -->

        {%- endif -%}

      </div>

      {% endif %}



      {% if section.settings.show_footer_credits %}

      <div class="flex--1-basis-0 flex">

        <div class="footer__credit mt--auto">

          <p class="mb1">&copy; {{ 'now' | date: "%Y" }} <a href="{{ routes.root_url }}" class=" color--{{ section_color }}-text">{{ shop.name }}</a></p>

          <p class="font-size--xs powered-by mb0 color--{{ section_color }}-text powered_by_link">

            {{ powered_by_link }}

          </p>

        </div>

      </div>

    </div>

    {% endif %}

  </div>

</footer>



{% schema %}

  {

    "name": "Footer",

    "settings": [

      {

        "type": "image_picker",

        "id": "logo",

        "label": "Logo image"

      },

      {

        "type": "checkbox",

        "id": "show_payment_icons",

        "label": "Show payment icons",

        "default": false

      },

      {

        "type": "checkbox",

        "id": "show_footer_credits",

        "info": "Shows credits and copyright",

        "label": "Show footer credits",

        "default": false

      },

      {

        "type": "header",

        "content": "Language Selector",

        "info": "To add a language, go to your [language settings.](/admin/settings/languages)"

      },

      {

        "type": "checkbox",

        "id": "show_locale_selector",

        "label": "Show language selector",

        "default": true

      },

      {

        "type": "header",

        "content": "Currency Selector",

        "info": "To add a currency, go to your [currency settings.](/admin/settings/payments)"

      },

      {

        "type": "checkbox",

        "id": "show_currency_selector",

        "label": "Show currency selector",

        "default": true

      },

      {

        "type":      "header",

        "content":   "Color"

      },
     {
         "type": "color",
         "id": "footer-color",
         "label": "Background Color"
      }

    ],

    "blocks": [

      {

        "type": "menus",

        "name": "Menus",

        "limit": 1,

        "settings": [

          {

            "type": "link_list",

            "id": "menu1",

            "label": "Menu",

            "default": "footer",

            "info": "This menu won't show dropdown items"

          },

          {

            "type": "link_list",

            "id": "menu2",

            "label": "Secondary Menu",

            "info": "This menu won't show dropdown items"

          },

          {

            "type": "link_list",

            "id": "menu3",

            "label": "Tertiary Menu",

            "info": "This menu won't show dropdown items"

          }

        ]

      },

      {

        "type": "richtext",

        "name": "Rich text",

        "limit": 1,

        "settings": [

          {

            "id": "text",

            "type": "richtext",

            "label": "Text",

            "default": "<p>Use this to add additional information about your store, e.g. address / contact details.</p>"

          },

          {

            "id": "css_class",

            "type": "text",

            "label": "Custom CSS Class"

          }

        ]

      },

      {

        "type": "newsletter",

        "name": "Newsletter",

        "limit": 1,

        "settings": [

          {

            "type": "richtext",

            "id": "text",

            "label": "Text",

            "default": "<p>Receive special offers and first look at new products.</p>"

          },

          {

            "type": "text",

            "id": "css_class",

            "label": "Custom CSS Class"

          }

        ]

      }

    ]

  }



{% endschema %}

