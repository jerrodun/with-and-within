{%- comment -%}
==================================
Render main module file
==================================
{%- endcomment -%}
{% capture section_content %}

  {% capture flickity_config %}
    {% if section.blocks.size > 1 %}
      data-flickity='{ "cellAlign": "left", "contain": true, "wrapAround": true, "pageDots": false, "adaptiveHeight": true, "arrowShape": "M 27.790379,52.027931 H 79.695 V 47.972045 H 27.790379 L 46.625822,29.066774 43.893358,26.325 20.305,49.999988 43.893358,73.675 46.625013,70.933222 Z" }'
    {% endif %}
  {% endcapture %}

  {% capture slider_content %}

    {% for block in section.blocks %}

    {%- comment -%}Section's original color scheme ( not being used at this moment ){%- endcomment -%}
    {%- assign section_color = block.settings.color_scheme -%}

    {%- comment -%}Column side setting field{%- endcomment -%}
    {%- assign should_swap_column_order = block.settings.should_swap_column_order -%}

    {%- comment -%}Heading and Description Fields{%- endcomment -%}
    {%- assign heading = block.settings.heading -%}
    {%- assign text = block.settings.text -%}

    {%- comment -%}Heading and Description Settings Fields{%- endcomment -%}
    {%- assign heading_font_size = block.settings.heading_font_size -%}
    {%- assign heading_text_color = block.settings.heading_text_color -%}

    {%- comment -%}Set of Links Fields{%- endcomment -%}
    {%- assign set_of_links = block.settings.set_of_links -%}
    {%- assign set_of_links_title = block.settings.set_of_links_title -%}

    {%- comment -%}Colored Text Fields{%- endcomment -%}
    {%- assign colored_text = block.settings.colored_text -%}
    {%- assign colored_text_title = block.settings.colored_text_title -%}

    {%- comment -%}Button Settings Fields{%- endcomment -%}
    {%- assign buttons_top_spacing = block.settings.buttons_top_spacing -%}
    {%- assign buttons_style_type = block.settings.buttons_style_type -%}

    {%- comment -%}Button Fields{%- endcomment -%}
    {%- assign button1_text = block.settings.button1_text -%}
    {%- assign button1_url = block.settings.button1_url -%}

    {%- comment -%}Image Fields{%- endcomment -%}
    {%- assign before_state_img = block.settings.before_img -%}
    {%- assign after_state_img = block.settings.after_img -%}


    <div class="carousel-cell">
      {% render 'aw-before-and-after-img-text-snippet' with
      section_id: block.id,
      section_color: section_color,
      should_swap_column_order: should_swap_column_order,
      heading: heading,
      heading_font_size: heading_font_size,
      heading_text_color: heading_text_color,
      set_of_links: set_of_links,
      set_of_links_title: set_of_links_title,
      colored_text: colored_text,
      colored_text_title: colored_text_title,
      text: text,
      buttons_top_spacing: buttons_top_spacing,
      buttons_style_type: buttons_style_type,
      button1_text: button1_text,
      button1_url: button1_url,
      before_state_img: before_state_img,
      after_state_img: after_state_img
    %}
    </div>
    {% endfor %}

  {% endcapture %}

  {% if section.blocks.size > 1 %}
    {% assign is_slider_class = 'before-and-after--has-slider' %}
  {% else %}
    {% assign is_slider_class = '' %}
  {% endif %}

  <div class="before-and-after-carousel">
    <div class="main-carousel {{ is_slider_class }}" {{ flickity_config }} >
        {{ slider_content }}
    </div>
  </div>

{% endcapture %}

{%- comment -%} Module General Settings{%- endcomment -%}
{%- assign section_bg_color = section.settings.section_bg_color -%}
{%- assign section_custom_padding = section.settings.section_custom_padding -%}

{%- comment -%}
==================================
Render wrapping Divs
==================================
{%- endcomment -%}
{% render 'aw-section-wrapper' with
    section_custom_padding: section_custom_padding,
    section_bg_color: section_bg_color,
    section_type: "aw-before-after-image-text-home-section",
    section_id: section.id,
    section_content: section_content
    %}

{% schema %}
{
  "name": "Before & After Image Text",
  "class": "before-after-image-text-home-section",
  "blocks": [
    {
      "type": "slide",
      "name": "Before & After Slide",
      "settings": [
        {
          "type": "checkbox",
          "id": "should_swap_column_order",
          "label": "Swap Column Order",
          "default": false
        },
        {
          "type": "image_picker",
          "id": "before_img",
          "label": "Before - Image"
        },
        {
          "type": "image_picker",
          "id": "after_img",
          "label": "After - Image"
        },
        {
          "type": "header",
          "content": "Heading & Text Settings"
        },
        {
          "type": "select",
          "id": "heading_font_size",
          "label": "Heading Font Size",
          "options": [
            {
              "value": "larger",
              "label": "Larger"
            },
            {
              "value": "smaller",
              "label": "Smaller"
            }
          ],
          "default": "smaller"
        },
        {
          "type": "select",
          "id": "heading_text_color",
          "label": "Heading Text Color",
          "options": [
            {
              "value": "sky_blue",
              "label": "Sky Blue"
            },
            {
              "value": "navy",
              "label": "Navy"
            }
          ],
          "default": "sky_blue"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Heading goes here"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Text goes here</p>"
        },
        {
          "type": "header",
          "content": "More content settings"
        },
        {
          "type": "text",
          "id": "set_of_links_title",
          "label": "Set of Links Title",
          "default": "Set of links title"
        },
        {
          "type": "richtext",
          "id": "set_of_links",
          "label": "Set of Links",
          "info": "Add every link in a new row",
          "default": "<p>Link goes here</p>"
        },
        {
          "type": "text",
          "id": "colored_text_title",
          "label": "Colored Text Title",
          "default": "Colored Text Title"
        },
        {
          "type": "richtext",
          "id": "colored_text",
          "label": "Colored Text"
        },
        {
          "type": "header",
          "content": "Buttons"
        },
        {
          "type": "select",
          "id": "buttons_top_spacing",
          "label": "Button Top Spacing",
          "options": [
            {
              "value": "regular_spaced",
              "label": "Regular"
            },
            {
              "value": "spaced_increased",
              "label": "Spaced"
            }
          ],
          "default": "regular_spaced"
        },
        {
          "type": "select",
          "id": "buttons_style_type",
          "label": "Button Style Type",
          "options": [
            {
              "value": "sky_blue",
              "label": "Sky Blue"
            },
            {
              "value": "gold",
              "label": "Gold"
            },
            {
              "value": "navy",
              "label": "Navy"
            }
          ],
          "default": "sky_blue"
        },
        {
          "type": "url",
          "id": "button1_url",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "button1_text",
          "label": "Button text"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "select",
      "id": "section_bg_color",
      "label": "Background Color",
      "options": [
        {
          "value": "aw_section_bg_white",
          "label": "White"
        },
        {
          "value": "aw_section_bg_sky_blue",
          "label": "Sky Blue"
        },
        {
          "value": "aw_section_bg_mint",
          "label": "Mint"
        },
        {
          "value": "aw_section_bg_light_gray",
          "label": "Light Gray"
        },
        {
          "value": "aw_section_bg_gradient",
          "label": "Gradient"
        }
      ],
      "default": "aw_section_bg_sky_blue"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        },
        {
          "value": "tertiary",
          "label": "Tertiary"
        },
        {
          "value": "quaternary",
          "label": "Quaternary"
        }
      ],
      "default": "secondary"
    },
    {
      "type": "header",
      "content": "Module Spacing"
    },
    {
      "type": "select",
      "id": "section_custom_padding",
      "label": "Section Custom Padding",
      "options": [
        {
          "value": "global",
          "label": "Global Padding Setting"
        },
        {
          "value": "smaller",
          "label": "Smaller"
        },
        {
          "value": "larger",
          "label": "Larger"
        }
      ],
      "default": "global"
    }
  ],
  "presets": [
    {
      "name": "Before & After Image Text",
      "category": "Image",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
