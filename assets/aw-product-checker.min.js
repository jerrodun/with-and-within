typeof jQuery=="function"&&parseFloat(jQuery.fn.jquery)>3?start(jQuery):loadAndStart();async function getScript(i){await new Promise((r,f)=>{const l=document.createElement("script"),g=document.getElementsByTagName("head")[0];let h=!1;l.src=i,l.integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=",l.crossOrigin="anonymous",l.onload=l.onreadystatechange=function(){!h&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")&&(h=!0,r())},g.appendChild(l)})}async function loadAndStart(){await getScript("https://code.jquery.com/jquery-3.6.0.min.js"),jQuery.noConflict(),start(jQuery)}function start(i){const r={};r.IngredientsTable=function(t){return t.$wrap=t,i.extend(t,f),t.initTable(),t};var f={$table:i('<table class="ingredients-table">'),$thead:i("<thead>"),$tbody:i("<tbody>"),clearResults:function(){this.find("span.highlightWord").each(function(){i(this).parent().text(i(this).text())}),this.find(".ingredients-table--result").remove()},findIngredients:function(t){const n=t.map(this.normalizeIngredientName);this.clearResults(),this.highlightIngredients(n),this.populateResults(n)},generateDetails:function(t){const n=i("<table>"),e=i("<thead>"),s=i("<tbody>");n.append(e,s);const a=r.ingredients.config.details;let o=i("<tr>");return a.forEach(({heading:d})=>{o.append(i(`<th>${d}</th>`))}),e.html(o),o=i("<tr>"),a.forEach(({name:d})=>{const c=i(`<td>${t[d]||""}</td>`);d==="ss_safe_rating"&&c.attr("data-ss-rating",t[d]),o.append(c)}),s.html(o),n},getRows:function(t){var n=this,e=i();return t=t.map(function(s){return n.normalizeIngredientName(s)}),t=t.filter(function(s){return s}),this.getIngredientRows().each(function(){var s=n.normalizeIngredientName(i(this).find("td").first().text());t.indexOf(s)!==-1&&(e=e.add(i(this)))}),e},getIngredientRows:function(){if(this.ingredientRows===void 0){var t=this.find("tbody tr:has(td)");this.ingredientRows=t}return this.ingredientRows},getIngredients:function(){if(this.ingredients===void 0){var t=this,n=[];this.getIngredientRows().each(function(){var e=t.normalizeIngredientName(i(this).find("td").first().text());e.length>1&&n.push(e)}),this.ingredients=n}return this.ingredients},hasIngredient:function(t){return t=this.normalizeIngredientName(t),this.getIngredients().indexOf(t)!==-1},highlightIngredients:function(t){var n=this;i(this.getRows(t).get().reverse()).each(function(){var e=i(this).find("td").first(),s=e.text();e.html(i(`<span class="highlightWord">${s}</span>`))})},initHeader:function(){const t=i("<tr>");r.ingredients.config.columns.forEach(({heading:n,name:e})=>{t.append(`<th>${n}</th>`)}),this.$thead.html(t)},initRows:function(){const t=r.ingredients.config.columns;let n=null;r.ingredients.alphabetical.forEach(e=>{const s=r.ingredients.data[e];n=this.insertLetterHeading(n,s.name);const a=i('<button class="show-more">Show More</button>');this.insertIngredientRow(s,a);const o=this.insertDetailsRow(s);a.click(function(){o.slideToggle("slow")})})},initTable:function(){this.initHeader(),this.initRows(),this.$table.append(this.$thead),this.$table.append(this.$tbody),this.$wrap.html(this.$table)},insertDetailsRow:function(t){const n=r.ingredients.config.columns,e=i('<tr class="ingredient-details__row"></tr>'),s=i(`<td colspan="${n.length}">`),a=i('<div class="ingredient-details">');return a.html(this.generateDetails(t)),a.appendTo(s),s.appendTo(e),this.$tbody.append(e),a},insertIngredientRow:function(t,n){const e=r.ingredients.config.columns,s=i('<tr class="ingredients-table__row">'),a=parseInt(t.average_clog_rating);if(!isNaN(a)){let o="red";a<3?o="green":a<4&&(o="yellow"),s.addClass(`rating-color--${o}`)}e.forEach(({heading:o,name:d})=>{const c=t[d],u=i("<td>");o==="show more"?u.html(n):u.html(c),s.append(u)}),this.$tbody.append(s),r.ingredients.$rows[t.id]=s},insertLetterHeading:function(t,n){if(n.toLowerCase().startsWith(t))return t;{const e=n[0].toLowerCase(),s=r.ingredients.config.columns.length;return this.$tbody.append(i(`<tr><th class="ingredients-table--letter-heading" colspan="${s}">${e}</th></tr>`)),e}},normalizeIngredientName:function(t){return t.replace(/~|\*|\(.*\)/g,"").trim().toLowerCase()},populateResults:function(t){const n=r.ingredients,e=n.config.columns.length,s=[i(`<tr class="ingredients-table--result"><th colspan="${e}">Search Results</th></tr>`)];t.forEach(a=>{const o=n.name[a];if(o){let d=n.$rows[o];const c=d.next().clone();d=d.clone(),d.find(".show-more").click(function(){c.find(".ingredient-details").slideToggle("slow")}),s.push(d.addClass("ingredients-table--result")),s.push(c.addClass("ingredients-table--result"))}}),s.length<2&&s.push(i(`<tr class="ingredients-table--result"><td colspan="${e}">No comedogenic ingredients found.</td></tr>`)),this.$tbody.prepend(s)}};r.SearchBox=function(t,n){i.extend(this,l),this.table=n,this.wrap(t),this.input=t,this.display=i('<div class="display">'),this.display.appendTo(this.wrapper);var e=this;return this.input.on("input",function(){e.sanitizeInput(),e.highlightTerms()}),this};var l={highlightTerms:function(){var t=this,n=this.getQuery().split(",").map(function(e){return t.table.hasIngredient(e)&&(e=e.replace(e.trim(),'<span class="highlightWord">'+e.trim()+"</span>")),e});this.display.html(n.join(","))},getQuery:function(){return this.input.text()},getTerms:function(){var t=this.getQuery();return t.split(",").map(function(n){return n.trim()})},sanitizeInput:function(){var t=i("<div>").html(this.getQuery());this.input.text(t.text());var n=this.input[0],e=document.createRange(),s=window.getSelection();try{e.setStart(n,1),e.collapse(!0),s.removeAllRanges(),s.addRange(e)}catch{}},wrap:function(t){this.wrapper=t.wrap('<div class="searchbox wrapper">').parent()}},g=r.SearchBox,h=r.IngredientsTable;i(document).ready(async function(){const t=new Headers,e=await(await fetch("http://awellnessdata.wpengine.com")).json();r.ingredients=e,r.ingredients.$rows=[];var s=new h(i(".js-ingredients-table--wrap")),a=new g(i(".searchbox"),s);a.input.on("input textinput",function(){s.findIngredients(a.getTerms())})});function p(t){t=t.toLowerCase().replace("~","").replace("*","");var n=t.split(",");return n=n.map(function(e){return i.trim(e)}),n}}
